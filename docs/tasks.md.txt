# BJARNE TASKS
_Last reviewed: 2025-12-05_

## Active
- [ ] Test MSan with real-world code generation scenarios
- [ ] Verify 15-attempt escalation works correctly

## Backlog
- [ ] `/init` command - Workspace indexing for codebase context
  - Scan current folder and subdirectories
  - Process all source files (.cpp, .h, .c, .hpp)
  - Create index of: functions, classes, structs, includes, dependencies
  - Storage options to evaluate:
    - bjarne.index.json (simple, portable)
    - SQLite (queryable, scales better)
    - Embedded DB (bbolt, badger)
  - Goal: Pull relevant context when user asks for code that integrates with existing codebase
  - Similar to Claude Code's codebase indexing
  - Consider: file hashes for incremental updates, AST parsing vs regex

- [ ] Easy installation / distribution
  - Goal: `something install -g bjarne` that just works
  - Options to evaluate:
    - `go install github.com/3rg0n/bjarne@latest` (Go users only)
    - Homebrew tap (macOS/Linux): `brew install 3rg0n/tap/bjarne`
    - Scoop bucket (Windows): `scoop install bjarne`
    - npm wrapper package (cross-platform): `npm install -g bjarne`
    - goreleaser for GitHub Releases with pre-built binaries
  - Post-install script should:
    - Check for podman/docker, warn if missing
    - Offer to pull bjarne-validator container
    - Create default config if needed
  - Publish container to ghcr.io/3rg0n/bjarne-validator:latest

- [ ] Collapsible code blocks with mouse interaction (requires alt screen mode)
- [ ] Multi-file project support (header + implementation)
- [ ] Property-based testing with FuzzTest
- [ ] Domain-specific validators (HFT, embedded, gamedev)
- [ ] Benchmark gate for performance-sensitive code
- [ ] CI/CD integration - GitHub Action for bjarne validation

## Completed
- [x] Multi-provider LLM support (Bedrock, Anthropic, OpenAI, Gemini)
  - Abstract LLMProvider interface in provider.go
  - BJARNE_PROVIDER env var: bedrock|anthropic|openai|gemini
  - BJARNE_API_KEY for non-Bedrock providers
  - Model mapping: haiku/sonnet/opus -> provider-specific IDs
- [x] MSan support with instrumented libc++
- [x] 15-attempt escalation with clear thresholds
- [x] Improved fix prompts with sanitizer guidance
- [x] LLM now receives full code + errors during fix iterations
- [x] Question detection for EASY tasks
- [x] Safe C functions rules in generation prompt
- [x] Code reveal animation

---

### Rules
- Keep 1-3 items active (WIP <= 3)
- When done:
  1. Commit with descriptive message
  2. Move to Completed section

> This file reflects *now*, not history. Use Git for history.
