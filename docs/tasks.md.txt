# BJARNE TASKS
_Last reviewed: 2025-12-08_

## Active
- [ ] Test MSan with real-world code generation scenarios
- [ ] Verify 15-attempt escalation works correctly

## Backlog
- [ ] `/init` command - Workspace indexing for codebase context
  - Scan current folder and subdirectories
  - Process all source files (.cpp, .h, .c, .hpp)
  - Create index of: functions, classes, structs, includes, dependencies
  - Storage options to evaluate:
    - bjarne.index.json (simple, portable)
    - SQLite (queryable, scales better)
    - Embedded DB (bbolt, badger)
  - Goal: Pull relevant context when user asks for code that integrates with existing codebase
  - Similar to Claude Code's codebase indexing
  - Consider: file hashes for incremental updates, AST parsing vs regex

- [ ] Collapsible code blocks with mouse interaction (requires alt screen mode)
- [ ] Multi-file project support (header + implementation)
- [ ] Property-based testing with FuzzTest
- [ ] Domain-specific validators (HFT, embedded, gamedev)
- [ ] Benchmark gate for performance-sensitive code
- [ ] CI/CD integration - GitHub Action for bjarne validation

## Completed
- [x] BSL 1.1 License for source-available distribution
  - 4-year change date to Apache 2.0
  - Personal/research/academic use free
  - Commercial production use requires license
- [x] Cross-platform install scripts
  - install.sh for macOS/Linux: `curl -fsSL ... | bash`
  - install.ps1 for Windows: `irm ... | iex`
  - Auto-detect platform/arch, add to PATH, check for Podman/Docker
- [x] Platform-specific Podman installation guidance
  - Helpful error messages when no container runtime found
  - Distro detection for Linux (apt/dnf/pacman/zypper)
  - Checks ~/.bjarne/bin/ for local binaries
- [x] Easy installation / distribution
  - goreleaser for GitHub Releases (linux/darwin/windows, amd64/arm64)
  - Homebrew tap: `brew install 3rg0n/tap/bjarne`
  - Scoop bucket: `scoop bucket add bjarne https://github.com/3rg0n/scoop-bucket && scoop install bjarne`
  - Container: `ghcr.io/3rg0n/bjarne-validator:latest`
  - First-run auto-pull with user confirmation
- [x] Multi-provider LLM support (Bedrock, Anthropic, OpenAI, Gemini)
  - Abstract LLMProvider interface in provider.go
  - BJARNE_PROVIDER env var: bedrock|anthropic|openai|gemini
  - BJARNE_API_KEY for non-Bedrock providers
  - Model mapping: haiku/sonnet/opus -> provider-specific IDs
- [x] MSan support with instrumented libc++
- [x] 15-attempt escalation with clear thresholds
- [x] Improved fix prompts with sanitizer guidance
- [x] LLM now receives full code + errors during fix iterations
- [x] Question detection for EASY tasks
- [x] Safe C functions rules in generation prompt
- [x] Code reveal animation

---

### Rules
- Keep 1-3 items active (WIP <= 3)
- When done:
  1. Commit with descriptive message
  2. Move to Completed section

> This file reflects *now*, not history. Use Git for history.
